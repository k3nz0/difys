/* prettier-ignore */
/* eslint-disable */
export default(function(r){function t(a){if(n[a])return n[a].exports;var e=n[a]={exports:{},id:a,loaded:!1};return r[a].call(e.exports,e,e.exports,t),e.loaded=!0,e.exports}var n={};return t.m=r,t.c=n,t.p="",t(0)}([function(r,t,n){function a(r,t){this.i=r,this.j=t,this.floor=-1,this.zone=-1,this.speed=1,this.weight=0,this.candidateRef=null}function e(r,t){void 0!==r&&1&r.l?(t.floor=r.f||0,t.zone=r.z||0,t.speed=1+(r.s||0)/10,t.zone!==m&&(g=!1)):(t.floor=-1,t.zone=-1)}function i(r,t,n,a,e){this.i=r,this.j=t,this.w=n,this.d=a,this.path=e}function o(r,t){return r.floor===t.floor||r.zone===t.zone&&(g||0!==r.zone||Math.abs(r.floor-t.floor)<=c)}function l(r,t,n,a){return o(r,t)&&(o(r,n)||o(r,a))}function u(r,t,n,a,e,o){var l=r.i,u=r.j,h=Math.sqrt((n-l)*(n-l)+(a-u)*(a-u));if(t=t/r.speed+r.weight,null===r.candidateRef){var f=new i(l,u,o.w+t,h,o);e.push(f),r.candidateRef=f}else{var s=r.candidateRef.w,d=o.w+t;d<s&&(r.candidateRef.w=d,r.candidateRef.path=o)}}function h(r,t,n,a,e){var i=r.i,h=r.j,f=v[i][h],s=v[i-1][h],d=v[i][h-1],c=v[i][h+1],p=v[i+1][h];o(f,s)&&u(s,1,t,n,a,r),o(f,p)&&u(p,1,t,n,a,r),o(f,d)&&u(d,1,t,n,a,r),o(f,c)&&u(c,1,t,n,a,r);var y=v[i-1][h-1],x=v[i-1][h+1],g=v[i+1][h-1],m=v[i+1][h+1],b=Math.sqrt(2);e&&(l(f,y,s,d)&&u(y,b,t,n,a,r),l(f,g,p,d)&&u(g,b,t,n,a,r),l(f,x,s,c)&&u(x,b,t,n,a,r),l(f,m,p,c)&&u(m,b,t,n,a,r))}for(var f=n(1),s=f.getMapPointFromCellId,d=f.getCellIdFromMapPoint,c=11.825,v=[],p=0;p<35;p+=1){for(var y=[],x=0;x<36;x+=1)y[x]=new a(p,x);v[p]=y}var g,m;t.fillPathGrid=function(r){m=r.cells[0].z||0,g=!0;for(var t=0;t<35;t+=1)for(var n=v[t],a=0;a<36;a+=1){var i=d(t-1,a-1),o=n[a];e(r.cells[i],o)}},t.updateCellPath=function(r,t){var n=f.getMapPointFromCellId(r);e(t,v[n.x+1][n.y+1])},t.getPath=function(r,t,n,a,e){var o,l;a=void 0===a||!!a;var u=s(r),f=s(t),c=u.x+1,p=u.y+1,y=v[c][p];if(-1===y.zone){for(var x=null,g=1/0,m=1/0,b=-1;b<=1;b+=1)for(var M=-1;M<=1;M+=1)if(0!==b||0!==M){var w=v[c+b][p+M];if(-1!==w.zone){var j=Math.abs(w.f-y.f),z=Math.abs(b)+Math.abs(M);(null===x||j<m||j<=m&&z<g)&&(x=w,g=z,m=j)}}return null!==x?[r,d(x.i-1,x.j-1)]:(console.error(new Error("[pathFinder.getPath] Player is stuck in "+c+"/"+p)),[r])}var P,C,I=f.x+1,A=f.y+1;for(C in n)P=s(C),v[P.x+1][P.y+1].weight+=10;for(var R=[],F=[],q=new i(c,p,0,Math.sqrt((c-I)*(c-I)+(p-A)*(p-A)),null),_=null,D=q;q.i!==I||q.j!==A;){h(q,I,A,R,a);var S=R.length;if(0===S){q=D;break}var O=1/0,k=0;for(o=0;o<S;o+=1)(l=R[o]).w+l.d<O&&(q=l,O=l.w+l.d,k=o);if(F.push(q),R.splice(k,1),0===q.d||e&&q.d<1.5){if(null===_||q.w<_.w){_=q,D=q;var G=[];for(o=0;o<R.length;o+=1)(l=R[o]).w+l.d<_.w?G.push(l):v[l.i][l.j].candidateRef=null;R=G}}else q.d<D.d&&(D=q)}for(o=0;o<R.length;o+=1)l=R[o],v[l.i][l.j].candidateRef=null;for(var N=0;N<F.length;N+=1)q=F[N],v[q.i][q.j].candidateRef=null;for(C in n)P=s(C),v[P.x+1][P.y+1].weight-=10;for(var T=[];null!==D;)T.unshift(d(D.i-1,D.j-1)),D=D.path;return T},t.getAccessibleCells=function(r,t){t+=1;var n=v[r+=1][t],a=v[r-1][t],e=v[r][t-1],i=v[r][t+1],l=v[r+1][t],u=[];return o(n,a)&&u.push({i:a.i-1,j:a.j-1}),o(n,l)&&u.push({i:l.i-1,j:l.j-1}),o(n,e)&&u.push({i:e.i-1,j:e.j-1}),o(n,i)&&u.push({i:i.i-1,j:i.j-1}),u},t.compressPath=function(r){for(var t,n,a=[],e=r[0],i=-1,o=0;o<r.length;o++){var l,u=r[o],h=s(u);(l=0===o?-1:h.y===n?h.x>t?7:3:h.x===t?h.y>n?1:5:h.x>t?h.y>n?0:6:h.y>n?2:4)!==i&&(a.push(e+(l<<12)),i=l),e=u,t=h.x,n=h.y}return a.push(e+(i<<12)),a},t.normalizePath=function(r){return function(r){if(!Array.isArray(r)||r.length<2)return!1;for(var t=s(r[0]),n=1,a=r.length;n<a;n+=1){var e=r[n],i=s(e);if(Math.abs(t.x-i.x)>1)return!1;if(Math.abs(t.y-i.y)>1)return!1;t=i}return!0}(r)?r:function(r){if(!Array.isArray(r))return[];if(r.length<2)return r;var t=[];t.push(r[0]);for(var n=s(r[0]),a=1,e=r.length;a<e;a+=1){var i,o,l=r[a],u=s(l),h=Math.abs(u.x-n.x),f=Math.abs(u.y-n.y);if(0===h||0===f){if(h>1)for(i=u.x>n.x?1:-1,n.x+=i;n.x!==u.x;)t.push(d(n.x,n.y)),n.x+=i;if(f>1)for(o=u.y>n.y?1:-1,n.y+=o;n.y!==u.y;)t.push(d(n.x,n.y)),n.y+=o}else if(h===f)for(i=u.x>n.x?1:-1,o=u.y>n.y?1:-1,n.x+=i,n.y+=o;n.y!==u.y;)t.push(d(n.x,n.y)),n.x+=i,n.y+=o;n=u,t.push(l)}return t}(r)},t.logPath=function(r){r=r||[];var t,n,a=[];for(t=0;t<33;t+=1)for(a.push([]),n=0;n<34;n+=1)void 0===d(t,n)?a[t][n]="    ":a[t][n]="[  ]";for(var e=0,i=r.length;e<i;e+=1){var o=r[e],l=s(o),u=e<10?"0":"";a[l.x][l.y]="["+u+e+"]"}var h="";for(n=0;n<34;n+=1){for(t=0;t<33;t+=1)h+=a[t][n];h+="\n"}return h},t.getPathDuration=n(2).getPathDuration},function(r,t,n){function a(r){var t=r%14-~~(r/28);return{x:t+19,y:t+~~(r/14)}}function e(r,t){return v[r+"_"+t]}function i(r,t){t=t||!1;var n=a(r),i=n.x,o=n.y,l=[];return t&&l.push(e(i+1,o+1)),l.push(e(i,o+1)),t&&l.push(e(i-1,o+1)),l.push(e(i-1,o)),t&&l.push(e(i-1,o-1)),l.push(e(i,o-1)),t&&l.push(e(i+1,o-1)),l.push(e(i+1,o)),l}var o=86,l=53-o,u=-6.5,h=19.225,f=Math.sqrt(2),s=f/2,d=f/o,c=f/43;t.getCoordinateSceneFromGrid=function(r){var t=r.x-h,n=r.y;return{x:(s*t+s*n)/d+o/2+l,y:(s*n-s*t)/c+u}},t.getMapPointFromCellId=a;var v={};(function(){for(var r=0;r<560;r++){var t=a(r);v[t.x+"_"+t.y]=r}})(),Object.freeze(v),t.getCellIdFromMapPoint=e,t.getNeighbourCells=i,t.areCellsNeighbours=function(r,t,n){return-1!==i(r,n).indexOf(t)},t.getOrientation=function(r,t,n){var e,i=a(r),o=a(t),l=Math.atan2(i.y-o.y,o.x-i.x);return e=n?[3,2,2,1,1,0,0,7,7,6,6,5,5,4,4,3,3][l=~~(Math.floor(8*l/Math.PI)+8)]:[3,1,1,7,7,5,5,3,3][l=~~(Math.floor(4*l/Math.PI)+4)],e},t.getDistance=function(r,t){return r=a(r),t=a(t),Math.abs(r.x-t.x)+Math.abs(r.y-t.y)}},function(r,t,n){function a(r,t,n,a,e,i){this.c=r,this.x=t,this.y=n,this.d=a,this.a=e,this.m=i}var e=n(3),i=[0,1,2,1,0,5,6,5],o={mounted:{linear:135,horizontal:200,vertical:120,symbolId:"AnimCourse"},parable:{linear:400,horizontal:500,vertical:450,symbolId:"FX"},running:{linear:170,horizontal:255,vertical:150,symbolId:"AnimCourse"},walking:{linear:480,horizontal:510,vertical:425,symbolId:"AnimMarche"},slide:{linear:57,horizontal:85,vertical:50,symbolId:"AnimStatique"}},l=function(r,t){return{id:r+"_"+i[t],base:r,direction:t}};t.getPathDuration=function(r,t,n,i,u){if(r.length<=1)return 0;var h,f,s,d;path=[],d=i?o.mounted:r.length>3&&o.running;for(var c,v=null|t,p=0;p<r.length;p++){var y=r[p],x=0;u?x=0:v&&v[y]&&v[y].f&&(x=v[y].f);var g,m=e.cellCoord[y];0===p?c=1:m.y===s?(g=d.horizontal,c=m.x>f?0:4):m.x===f?(g=d.vertical,c=m.y>s?2:6):(g=d.linear,c=m.x>f?m.y>s?1:7:m.y>s?3:5),c=n;var b=l(d.symbolId,c);p>0&&(h.d=c,h.a=b,h.m=g),path.push(new a(y,m.x,m.y-x,c,b,g)),h=path[path.length-1],f=m.x,s=m.y}var M,w,j={},z=l("AnimStatique",c),P=l("AnimStatique_to_"+path[0].a.base,path[0].a.direction),C=l(d.symbolId+"_to_"+z.base,c);return j[P.id]&&(M=path[0],w=T.getSymbolDuration(P.id),path.unshift(new a(M.c,M.x,M.y,M.d,P,w))),j[C.id]&&(M=path[path.length-1],w=T.getSymbolDuration(C.id),M.a=C,M.m=w,path.push(new a(M.c,M.x,M.y,M.d,z,M.m))),path[path.length-1].a=z,path.map(r=>r.m).reduce((r,t)=>r+t)}},function(r,t,n){function a(r){var t=r%14,n=Math.floor(r/14);return{x:(t+=n%2*.5)*e,y:.5*n*i}}var e=86,i=43;r.exports.getCellCoord=a;var o=[];r.exports.cellCoord=function(){for(var r=0;r<560;r+=1)o.push(a(r));return Object.freeze(o),o}()}]));